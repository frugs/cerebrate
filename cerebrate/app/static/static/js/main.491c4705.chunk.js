(this["webpackJsonpcerebrate-gui"]=this["webpackJsonpcerebrate-gui"]||[]).push([[0],{283:function(e,a,t){e.exports=t(429)},288:function(e,a,t){},290:function(e,a,t){},321:function(e,a){},323:function(e,a){},334:function(e,a){},336:function(e,a){},363:function(e,a){},365:function(e,a){},366:function(e,a){},372:function(e,a){},374:function(e,a){},392:function(e,a){},394:function(e,a){},406:function(e,a){},409:function(e,a){},414:function(e,a,t){},415:function(e,a,t){},416:function(e,a,t){},417:function(e,a,t){},418:function(e,a,t){},419:function(e,a,t){},428:function(e,a,t){},429:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(16),s=t.n(l),o=(t(288),t(13)),c=t.n(o),i=t(21),p=t(28),u=t(29),d=t(31),f=t(30),m=(t(290),t(36)),y=t(434),g=t(43),b=t(32),T=t(436),h=t(64),v=["player","opponent","game"],E=[g.a.SUCCESS,g.a.DANGER,g.a.PRIMARY],R=function(e){var a,t=Object(h.a)(v);try{for(t.s();!(a=t.n()).done;){var n=a.value;if(0===e.indexOf(n))return n}}catch(r){t.e(r)}finally{t.f()}return null},S=function(e){var a,t=Object(h.a)(v);try{for(t.s();!(a=t.n()).done;){var n=a.value;if(0===e.indexOf(n))return e.slice(n.length+":".length)}}catch(r){t.e(r)}finally{t.f()}},O=function(e){for(var a=0;a<v.length&&E.length;a++)if(0===e.indexOf(v[a]))return E[a];return null};var N=function(e){var a=e.fill,t=e.disabled,n=e.tagIntent,l=e.suggestTags,s=e.selectedTags,o=e.onTagsSelected,c=e.tagPrefix,i=Object(m.a)(e,["fill","disabled","tagIntent","suggestTags","selectedTags","onTagsSelected","tagPrefix"]);return r.a.createElement(T.a,Object.assign({createNewItemRenderer:function(e,a,t){return r.a.createElement(y.k,{active:a,onClick:t,text:e,key:e})},itemRenderer:function(e,a){var t=a.modifiers,n=a.handleClick;return t.matchesPredicate?r.a.createElement(y.k,{active:t.active,onClick:n,text:S(e),key:e}):null},itemPredicate:function(e,a,t,n){return 0===a.indexOf(c)&&!s.includes(a)&&a.includes(e.toLocaleLowerCase("en-GB"))},initialContent:null,items:l,selectedItems:s.filter((function(e){return 0===e.indexOf(c)})),createNewItemFromQuery:function(e){return c+e},onItemSelect:function(e){s.includes(e)||(s.push(e),o(s))},resetOnSelect:!0,tagRenderer:function(e){return S(e)},tagInputProps:{disabled:t,onRemove:function(e,a,t){s.splice(s.indexOf(c+e),1),o(s)},tagProps:{intent:n}},openOnKeyDown:!0,fill:a,placeholder:"Tags..."},i))},D=t(120),x=t.n(D),I=(t(412),{sleep:function(){var e=Object(i.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,a)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}),w=t(93),C=["macro","all_in","1_base_all_in","2_base_all_in","3_base_all_in","mech","bio","stargate","twilight","dt","swarm_host","battlecruiser","nydus","cannon_rush","proxy_barracks","proxy_hatch"],A=[].concat(Object(w.a)(C.map((function(e){return"player:".concat(e)}))),Object(w.a)(C.map((function(e){return"opponent:".concat(e)}))),Object(w.a)(["macro","basetrade"].map((function(e){return"game:".concat(e)})))),j=function(e){var a=new Set(e);return e.concat(A.filter((function(e){return!a.has(e)})))},k=j(["player:win","player:loss","player:terran","player:protoss","player:zerg","player:ai","opponent:win","opponent:loss","opponent:terran","opponent:protoss","opponent:zerg","opponent:ai","game:zvp","game:zvt","game:zvz","game:tvz","game:tvp","game:tvt","game:pvt","game:pvz","game:pvp","game:short","game:long","game:1v1","game:2v2","game:3v3","game:4v4","game:ffa"]),L=function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return console.log(a)},F=function(){var e=Object(i.a)(c.a.mark((function e(){var a,t,n,r,l,s,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=o.length,t=new Array(a),n=0;n<a;n++)t[n]=o[n];if(L(t),!(t.length<1)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,I.sleep(200);case 6:r=t[0],l=r.replayId,s=r.force,U.onReplayLoadedListeners.forEach((function(e){return e.onReplayLoaded({replayId:l,replayTimestamp:1575909015,teams:["BobTheZealot","Jim Raynor"],playerTeam:null,opponentTeam:null,replayFileName:null,selectedTags:["game:fake_tag"],notes:"Some fake notes",force:s})}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(c.a.mark((function e(){var a,t,n,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=r.length,t=new Array(a),n=0;n<a;n++)t[n]=r[n];return L(t),e.next=4,I.sleep(200);case 4:U.onReplayLoadedListeners.forEach((function(e){return e.onReplayLoaded({replayId:"SOME HASH VALUE",replayTimestamp:Math.floor(Date.now()/1e3),teams:["Tassadar","Artanis"],playerTeam:null,opponentTeam:null,replayFileName:null,selectedTags:["game:fake_tag_2"],notes:"This is the most recently played replay",force:!0})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(c.a.mark((function e(){var a,t,n,r,l,s,o,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=i.length,t=new Array(a),n=0;n<a;n++)t[n]=i[n];if(L(t),!(t.length<1)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,I.sleep(200);case 6:r=t[0],l=r.replayId,s=r.playerTeam,o=r.opponentTeam,U.onReplayLoadedListeners.forEach((function(e){return e.onReplayLoaded({replayId:l,replayTimestamp:1575909015,teams:["BobTheZealot","JimRaynor"],playerTeam:s,opponentTeam:o,replayFileName:null,selectedTags:["game:fake_tag"],notes:"Some fake notes",force:!1})}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(c.a.mark((function e(){var a,t,n,r,l=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=l.length,t=new Array(a),n=0;n<a;n++)t[n]=l[n];if(L(t),!(t.length<1)){e.next=4;break}return e.abrupt("return");case 4:return r=t[0].replayId,e.next=7,I.sleep(500);case 7:U.onReplayUpdatedListeners.forEach((function(e){return e.onReplayUpdated({success:!0,replayId:r})}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(i.a)(c.a.mark((function e(){var a,t,n,r,l,s,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=o.length,t=new Array(a),n=0;n<a;n++)t[n]=o[n];if(L(t),!(t.length<1)){e.next=4;break}return e.abrupt("return");case 4:return r=t[0],l=r.includeTags||[],s=r.excludeTags||[],e.abrupt("return",{replays:[{replayId:"f91abca15806c6038f9b4af454af40d6dd32",replayTimestamp:1602931843,teams:["BobTheZealot","JimRaynor"],notes:"A truly great game between the two titans of StarCraft"},{replayId:"540a1430ffe4d73f7c2c9d87cd2e4907b419",replayTimestamp:1585730727,teams:["Tassadar","JimRaynor"],notes:"An unfortunate disagreement between friends led to this bar fight"},{replayId:"ab6ee43405077302a6a9fc3f1ceaf6aae6fc",replayTimestamp:1322166082,teams:["BobTheZealot","Tassadar"],notes:"An awful match"},{replayId:"48df54843f16afea0b8b92aa167de0e31912",replayTimestamp:1471426714,teams:["Tassadar","BobTheZealot"],notes:"Very BM"},{replayId:"391b6c73cae67daaa1306c5ef5cad275bd29",replayTimestamp:1398404675,teams:["Tassadar","Artanis"],notes:"The quick brown fox jumps over the lazy dog. Abcdefghijklm nopqrs t uvwxy z"},{replayId:"03afb9220f1eee91ed3cdcf862446bfb1002",replayTimestamp:1435622178,teams:["Artanis","BobTheZealot"],notes:""}],tagFrequencyTable:k.filter((function(e){return!l.includes(e)&&!s.includes(e)})).map((function(e){return{tag:e,frequency:1}}))});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U={selectReplay:function(){return(self&&self.selectReplay||F).apply(void 0,arguments)},selectMostRecentReplay:function(){return(self&&self.selectMostRecentReplay||P).apply(void 0,arguments)},selectPlayerOpponent:function(){return(self&&self.selectPlayerOpponent||_).apply(void 0,arguments)},updateReplayInfo:function(){return(self&&self.updateReplayInfo||B).apply(void 0,arguments)},findReplays:function(){return(self&&self.findReplays||G).apply(void 0,arguments)},onReplayLoadedListeners:[],onReplayUpdatedListeners:[]};window.replayLoaded=function(){var e=Object(i.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U.onReplayLoadedListeners.forEach((function(e){return e.onReplayLoaded(a)}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),window.replayUpdated=function(){var e=Object(i.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.sleep(500);case 2:U.onReplayUpdatedListeners.forEach((function(e){return e.onReplayUpdated(a)}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();t(414);var M=function(e){Object(d.a)(t,e);var a=Object(f.a)(t);function t(e){var n;return Object(p.a)(this,t),(n=a.call(this,e)).state={valid:!0,disabled:!1},n}return Object(u.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.replayFileName,n=a.setReplayId,l=a.setReplayFileName,s=a.setReplayData,o=a.resetAndDisableForm,c=Object(m.a)(a,["replayFileName","setReplayId","setReplayFileName","setReplayData","resetAndDisableForm"]);return r.a.createElement("div",{className:"ReplaySelector-container"},r.a.createElement(y.d,Object.assign({disabled:this.state.disabled,text:t||"Choose replay file...",onInputChange:function(a){var t=a.target.value;if(t&&a.target.files){var r=a.target.files[0];e.setState({disabled:!0}),l(function(e){return e.split("\\").pop().split("/").pop()}(t)),o();var c=new FileReader;c.addEventListener("load",(function(a){var t=a.target.result,l=x.a.SHA256(x.a.lib.WordArray.create(t)).toString();n(l);var o=new FileReader;o.addEventListener("load",(function(a){var t=a.target.result;s(t),e.setState({disabled:!1}),U.selectReplay({replayId:l,replayData:t})})),o.readAsDataURL(r)})),c.readAsArrayBuffer(r)}},inputProps:{accept:".sc2replay"}},c)),r.a.createElement(y.a,{className:"ReplaySelector-button",text:"Most recent replay",onClick:function(e){o(),U.selectMostRecentReplay()}}))}}]),t}(r.a.Component),Y=(t(415),function(e){Object(d.a)(t,e);var a=Object(f.a)(t);function t(){return Object(p.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"onPlayerSelected",value:function(e){var a=this.props,t=a.replayId,n=a.teams,r=a.setPlayerTeam,l=a.setOpponentTeam,s=a.disableForm,o=parseInt(e.currentTarget.value);if(o<0)r(null);else{r(o);var c=o,i=null;if(2===n.length){var p=0===o?1:0;l(p),i=p}s(),U.selectPlayerOpponent({replayId:t,playerTeam:c,opponentTeam:i})}}},{key:"onOpponentSelected",value:function(e){var a=this.props,t=a.replayId,n=a.teams,r=a.setPlayerTeam,l=a.setOpponentTeam,s=a.disableForm,o=parseInt(e.currentTarget.value);if(o<0)l(null);else{l(o);var c=o,i=null;if(2===n.length){var p=0===o?1:0;r(p),i=p}s(),U.selectPlayerOpponent({replayId:t,playerTeam:i,opponentTeam:c})}}},{key:"render",value:function(){var e=this,a=this.props,t=a.formDisabled,n=a.teams,l=a.playerTeam,s=a.opponentTeam;return r.a.createElement("div",{className:"SelectPlayerAndOpponentInput-container"},r.a.createElement(y.e,{className:"SelectPlayerAndOpponentInput-form-group SelectPlayerAndOpponentInput-form-group-player",label:"Player"},r.a.createElement(y.g,{disabled:t,fill:!0,iconProps:{intent:g.a.SUCCESS},options:[{label:"Choose player...",value:"-1"}].concat(n.map((function(e,a){return{label:e,value:a.toString()}}))),value:null!==l?l.toString():"-1",onChange:function(a){return e.onPlayerSelected(a)}})),r.a.createElement(y.e,{className:"SelectPlayerAndOpponentInput-form-group",label:"Opponent"},r.a.createElement(y.g,{disabled:t,fill:!0,iconProps:{intent:g.a.DANGER},options:[{label:"Choose opponent...",value:"-1"}].concat(n.map((function(e,a){return{label:e,value:a.toString()}}))),value:null!==s?s.toString():"-1",onChange:function(a){return e.onOpponentSelected(a)}})))}}]),t}(r.a.Component)),q=function(e){var a=new Date(1e3*e);return a.toLocaleDateString()+" "+a.toLocaleTimeString()},z=function(e){return Math.floor(e.getTime()/1e3)},V=function(e){Object(d.a)(t,e);var a=Object(f.a)(t);function t(){return Object(p.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){var e=this.props.replayTimestamp;return r.a.createElement(y.e,{label:"Replay date"},r.a.createElement(y.i,{disabled:!0,fill:!0,value:e?q(e):""}))}}]),t}(r.a.Component);function H(e){var a=e.notes,t=e.replaySelectedTags,n=e.submittingReplay,l=e.setNotes,s=e.updateReplayInfo,o=e.setReplaySelectedTags,c=Object(m.a)(e,["notes","replaySelectedTags","submittingReplay","setNotes","updateReplayInfo","setReplaySelectedTags"]),i=c.replayId,p=c.formDisabled,u=c.playerTeam,d=c.opponentTeam,f=c.failedToTagReplay,T=c.failedToLoadReplay;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(y.e,{label:"Replay ID"},r.a.createElement(y.i,{disabled:!0,fill:!0,value:i})),r.a.createElement(y.e,{label:"Replay file",intent:T?g.a.DANGER:null,helperText:T?"Failed to load replay, please select another or try again.":null},r.a.createElement(M,Object.assign({fill:!0},c))),r.a.createElement(V,c),r.a.createElement(Y,c),r.a.createElement(y.e,{label:"Player tags"},r.a.createElement(N,Object.assign({},c,{fill:!0,selectedTags:t,onTagsSelected:o,disabled:p||null===u,tagPrefix:"player:",tagIntent:g.a.SUCCESS}))),r.a.createElement(y.e,{label:"Opponent tags"},r.a.createElement(N,Object.assign({},c,{fill:!0,selectedTags:t,onTagsSelected:o,disabled:p||null===d,tagPrefix:"opponent:",tagIntent:g.a.DANGER}))),r.a.createElement(y.e,{label:"Game tags"},r.a.createElement(N,Object.assign({},c,{fill:!0,selectedTags:t,onTagsSelected:o,disabled:p,tagPrefix:"game:",tagIntent:g.a.PRIMARY}))),r.a.createElement(y.e,{label:"Notes"},r.a.createElement(y.s,{fill:!0,disabled:p,value:a,onChange:function(e){return l(e.target.value)}})),r.a.createElement(y.e,{intent:f?g.a.DANGER:null,helperText:f?"Failed to save tags, please select another replay or try again.":null},r.a.createElement(y.a,{fill:!0,loading:n,intent:g.a.SUCCESS,disabled:p||null===u||null===d,onClick:s,icon:b.a.TAG},"Save tags")))}t(416);var J=function(e){Object(d.a)(t,e);var a=Object(f.a)(t);function t(e){var n;return Object(p.a)(this,t),(n=a.call(this,e)).state={navbarTabId:"Home"},n}return Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.l,{className:"CerebrateNavbar-navbar"},r.a.createElement(y.l.Group,null,r.a.createElement(y.l.Heading,{className:"CerebrateNavbar-navbar-heading"},r.a.createElement("div",null,r.a.createElement("div",{className:"CerebrateNavbar-logo"},"Cerebrate"),r.a.createElement("em",{className:"CerebrateNavbar-logo-subtitle"},"A StarCraft II Replay Manager")))))}}]),t}(r.a.Component),W=t(44),Z=t(91),K=t(195),Q=t(1),X=(t(417),{ROOT:"root",REPLAY_FOLDER:"replay_folder",REPLAY:"replay",TAG:"tag",LOADING:"loading"}),$=function(e){Object(d.a)(t,e);var a=Object(f.a)(t);function t(){var e;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).deselectNodes=function(a){if(a){var t,n=Object(h.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.isSelected=!1,e.deselectNodes(r.childNodes)}}catch(l){n.e(l)}finally{n.f()}}},e.deselectAllNodes=function(){e.deselectNodes(e.props.contents)},e.handleNodeClick=function(){var a=Object(i.a)(c.a.mark((function a(t,n,r){var l,s,o;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=t.nodeType,a.next=a.t0===X.TAG?3:a.t0===X.REPLAY_FOLDER||a.t0===X.REPLAY?6:12;break;case 3:return a.next=5,e.handleNodeExpand(t);case 5:return a.abrupt("break",13);case 6:if(r.shiftKey?t.isSelected=!t.isSelected:(l=t.isSelected,e.deselectAllNodes(),t.isSelected=t.nodeType===X.REPLAY||!l),t.childNodes){s=Object(h.a)(t.childNodes);try{for(s.s();!(o=s.n()).done;)o.value.isSelected=t.isSelected}catch(n){s.e(n)}finally{s.f()}}if(!t.isSelected||t.isExpanded){a.next=11;break}return a.next=11,e.handleNodeExpand(t);case 11:case 12:return a.abrupt("break",13);case 13:e.props.updateTagTree();case 14:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}(),e.handleNodeCollapse=function(a){a.nodeType!==X.ROOT&&(a.nodeType===X.TAG&&e.deselectNodes(a.childNodes),a.isExpanded=!1,e.props.updateTagTree())},e.handleNodeExpand=function(){var a=Object(i.a)(c.a.mark((function a(t){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.isExpanded=!0,a.t0=t.nodeType,a.next=a.t0===X.TAG?4:7;break;case 4:return a.next=6,e.handleTagNodeExpand(t);case 6:case 7:return a.abrupt("break",8);case 8:e.props.updateTagTree();case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleTagNodeExpand=function(){var a=Object(i.a)(c.a.mark((function a(t){var n,r,l,s,o,i;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.props,r=n.includeTags,l=n.excludeTags,a.next=3,U.findReplays({includeTags:r.concat(t.filterTags),excludeTags:l});case 3:s=a.sent,o=s.replays,i=s.tagFrequencyTable,t.childNodes=ae(t.filterTags,o,i);case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.t,Object.assign({},this.props,{onNodeClick:this.handleNodeClick,onNodeExpand:this.handleNodeExpand,onNodeCollapse:this.handleNodeCollapse}))}}]),t}(r.a.Component),ee=function(e){return e.map((function(e,a){return{id:a+1,nodeType:X.REPLAY,replay:e,icon:r.a.createElement(y.h,{icon:b.a.DOCUMENT,className:Q.a.TREE_NODE_ICON}),className:"ReplayTagTree-tree-node",label:r.a.createElement("div",{className:"ReplayTagTree-tree-node-label-replay"},r.a.createElement("div",{className:"ReplayTagTree-tree-node-label-replay-id"},e.replayId.substring(0,8)),"\xa0",r.a.createElement("div",{className:"ReplayTagTree-tree-node-label-replay-teams"},e.teams.join(" vs ")),e.notes?r.a.createElement("div",{className:"ReplayTagTree-tree-node-label-replay-notes"},r.a.createElement("em",null,e.notes)):null),secondaryLabel:r.a.createElement("div",{className:"ReplayTagTree-tree-node-secondary-label"},r.a.createElement("em",null,q(e.replayTimestamp)))}}))},ae=function(e,a,t){return[{id:0,nodeType:X.REPLAY_FOLDER,filterTags:e,icon:r.a.createElement(y.h,{icon:b.a.FOLDER_OPEN,className:Q.a.TREE_NODE_ICON}),label:"Replays",childNodes:ee(a)}].concat(t.map((function(a,t){return{id:t+1,nodeType:X.TAG,filterTags:e.concat(a.tag),icon:r.a.createElement(y.h,{icon:b.a.TAG,intent:O(a.tag),className:Q.a.TREE_NODE_ICON}),label:r.a.createElement("div",null,r.a.createElement("span",{className:"ReplayTagTree-tree-node-label-"+R(a.tag)+"-tag"},r.a.createElement("span",{className:"ReplayTagTree-tree-node-label-tag-prefix"},R(a.tag),":\xa0"),r.a.createElement("span",{className:"ReplayTagTree-tree-node-label-tag-name"},r.a.createElement("strong",null,S(a.tag))))),secondaryLabel:r.a.createElement("span",{className:"ReplayTagTree-tree-node-secondary-label"},r.a.createElement("em",null,"Replay(s): "+a.frequency," ")),childNodes:[{id:0,nodeType:X.LOADING,label:r.a.createElement("span",null,r.a.createElement("em",null,"Loading...")),disabled:!0}]}})))},te=function(e,a){return[{id:0,nodeType:X.ROOT,filterTags:[],icon:r.a.createElement(y.h,{icon:b.a.LIST_COLUMNS,className:Q.a.TREE_NODE_ICON}),label:r.a.createElement("div",{className:"ReplayTagTree-tree-node-label-root"},r.a.createElement("strong",null,"Replay results")),isExpanded:!0,childNodes:ae([],e,a)}]},ne=function e(a){return a?a.filter((function(e){return e.isSelected&&e.nodeType===X.REPLAY})).map((function(e){return e.replay})).concat(a.map((function(a){return e(a.childNodes)})).flat()):[]};t(418);function re(e){var a=e.formGroupLabel,t=e.selectOptions,n=e.selectValue,l=e.sortDescending,s=e.setSortDescending;return r.a.createElement(y.e,{className:"ReplayFilterAndSort-sorting-form-group",contentClassName:"ReplayFilterAndSort-sorting-form-group-content",label:a},r.a.createElement(y.g,{fill:!0,options:t,defaultValue:n}),r.a.createElement(y.o,{className:"ReplayFilterAndSort-sorting-descending-switch",checked:l,innerLabel:"Ascending",innerLabelChecked:"Descending",onChange:function(e){return s(e.currentTarget.checked)}}))}function le(e){var a=e.sortReplaysDescending,t=e.sortTagsDescending;return r.a.createElement(y.b,{className:"ReplayFilterAndSort-container"},r.a.createElement(y.f,{className:"ReplayFilterAndSort-control-group-heading"},"Sorting"),r.a.createElement(y.c,{fill:!0,vertical:!1},r.a.createElement(re,{formGroupLabel:"Sort replays by",selectOptions:[{label:"Replay date",value:"date"}],selectValue:"date",sortDescending:a,setSortDescending:function(){}}),r.a.createElement(re,{formGroupLabel:"Sort tags by",selectOptions:[{label:"Tag frequency",value:"frequency"}],selectValue:"frequency",sortDescending:t,setSortDescending:function(){}})))}function se(e){var a=e.className,t=e.selectedTags,n=e.onTagsSelected,l=e.title,s=Object(m.a)(e,["className","selectedTags","onTagsSelected","title"]);return r.a.createElement(y.b,{className:"ReplayFilterAndSort-container ".concat(a)},r.a.createElement(y.f,{className:"ReplayFilterAndSort-control-group-heading"},l),r.a.createElement(y.c,{fill:!0,vertical:!1},r.a.createElement(y.e,{label:"Player tags",className:"ReplayFilterAndSort-select-tags-form-group"},r.a.createElement(N,Object.assign({selectedTags:t,onTagsSelected:n,tagPrefix:"player:",tagIntent:g.a.SUCCESS,fill:!0},s))),r.a.createElement(y.e,{label:"Opponent tags",className:"ReplayFilterAndSort-select-tags-form-group"},r.a.createElement(N,Object.assign({selectedTags:t,onTagsSelected:n,tagPrefix:"opponent:",tagIntent:g.a.DANGER,fill:!0},s))),r.a.createElement(y.e,{label:"Game tags",className:"ReplayFilterAndSort-select-tags-form-group"},r.a.createElement(N,Object.assign({selectedTags:t,onTagsSelected:n,tagPrefix:"game:",tagIntent:g.a.PRIMARY,fill:!0},s)))))}t(419);var oe=t(437),ce=t(121);function ie(e){var a=e.filterReplaysByDate,t=e.setFilterReplaysByDate,l=e.filterDateRange,s=e.setFilterDateRange,o=Object(m.a)(e,["filterReplaysByDate","setFilterReplaysByDate","filterDateRange","setFilterDateRange"]),c=Object(n.useState)(0),i=Object(Z.a)(c,2),p=i[0],u=i[1];return r.a.createElement("div",null,r.a.createElement(y.b,{className:"ReplayFilterAndSort-container"},r.a.createElement(y.f,{className:"ReplayFilterAndSort-control-group-heading"},"Replay date"),r.a.createElement(y.e,{label:"Filter by replay date",className:"ReplayDateFilter-replay-date-form-group"},r.a.createElement(y.o,{checked:a,innerLabel:"Show all replays",innerLabelChecked:"Filter replays by date",onChange:function(e){return t(e.currentTarget.checked)}})),a?r.a.createElement(y.e,{label:"Choose dates",className:"ReplayDateFilter-replay-date-form-group"},r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement(oe.a,Object.assign({className:"ReplayDateFilter-replay-date-range-picker",maxDate:new Date,singleMonthOnly:!0,timePickerProps:{autoFocus:!0,precision:ce.b.MINUTE,defaultValue:new Date},allowSingleDayRange:!0,selectedShortcutIndex:p,onShortcutChange:function(e,a){return u(a)},value:l,onChange:function(e){return s(e)}},o)))):null))}function pe(e){var a=e.includeTags,t=e.setIncludeTags,n=e.excludeTags,l=e.setExcludeTags,s=Object(m.a)(e,["includeTags","setIncludeTags","excludeTags","setExcludeTags"]);return r.a.createElement("div",null,r.a.createElement(ie,s),r.a.createElement(le,s),r.a.createElement(se,Object.assign({className:"ReplayFilterAndSort-container-include-tags",title:"Include tags",selectedTags:a,onTagsSelected:t},s)),r.a.createElement(se,Object.assign({className:"ReplayFilterAndSort-container-exclude-tags",title:"Exclude tags",selectedTags:n,onTagsSelected:l},s)))}t(428);var ue=function(e){Object(d.a)(t,e);var a=Object(f.a)(t);function t(e){var n;return Object(p.a)(this,t),(n=a.call(this,e)).state={loading:!1,resultsCounter:0,filterReplaysByDate:!1,setFilterReplaysByDate:function(e){n.setState({filterReplaysByDate:e})},filterDateRange:[new Date((new Date).setHours(0,0,0,0)),new Date],setFilterDateRange:function(e){n.setState({filterDateRange:e})},sortReplaysDescending:!0,setSortReplaysDescending:function(e){n.setState({sortReplaysDescending:e})},sortTagsDescending:!0,setSortTagsDescending:function(e){n.setState({sortReplaysDescending:e})},includeTags:["game:1v1"],setIncludeTags:function(e){n.setState({includeTags:e})},excludeTags:["opponent:ai"],setExcludeTags:function(e){n.setState({excludeTags:e})},tagTreeContents:[],setTagTreeContents:function(e){n.setState({tagTreeContents:e})},updateTagTree:function(){n.setState(n.state)},viewDetailsButtonLoading:!1},n}return Object(u.a)(t,[{key:"render",value:function(){var e=this,a=this.props.setNavbarTabId;return r.a.createElement("div",null,r.a.createElement("div",{className:"FindReplays-filter-sort-container"},r.a.createElement(pe,Object.assign({},this.props,this.state)),r.a.createElement(y.a,{fill:!0,intent:g.a.PRIMARY,loading:this.state.loading,onClick:function(){e.setState({loading:!0}),Object(i.a)(c.a.mark((function a(){var t,n,r,l,s,o;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=Object(K.a)({includeTags:e.state.includeTags,excludeTags:e.state.excludeTags},e.state.filterReplaysByDate&&(2===(c=e.state.filterDateRange).length&&null!==c[0]&&null!==c[1])&&{startTimestamp:z(e.state.filterDateRange[0]),endTimestamp:z(e.state.filterDateRange[1])}),a.next=3,Promise.all([U.findReplays(t),I.sleep(200)]);case 3:n=a.sent,r=Object(Z.a)(n,1),l=r[0],s=l.replays,o=l.tagFrequencyTable,e.setState({loading:!1,resultsCounter:e.state.resultsCounter+1,tagTreeContents:te(s,o)});case 9:case"end":return a.stop()}var c}),a)})))()},icon:b.a.SEARCH},"Find replays")),0===this.state.resultsCounter?null:r.a.createElement("div",{className:"FindReplays-results-container ".concat(this.state.loading?Q.a.SKELETON:"")},r.a.createElement($,Object.assign({className:"FindReplays-tag-tree",key:this.state.resultsCounter,contents:this.state.tagTreeContents},this.props,this.state)),r.a.createElement("div",{className:"FindReplays-result-options-container"},r.a.createElement(y.b,{className:"FindReplays-result-options-card"},r.a.createElement(y.f,null,"Replay actions"),r.a.createElement(y.a,{fill:!0,icon:b.a.DOCUMENT,disabled:1!==ne(this.state.tagTreeContents).length,loading:this.state.viewDetailsButtonLoading,onClick:function(){var t=Object(i.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===(r=ne(e.state.tagTreeContents)).length){t.next=3;break}return t.abrupt("return");case 3:return e.setState({viewDetailsButtonLoading:!0}),t.next=6,U.selectReplay({replayId:r[0].replayId,force:!0});case 6:e.setState({viewDetailsButtonLoading:!1}),a("form");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"View details"),r.a.createElement(y.a,{fill:!0,intent:g.a.WARNING,icon:b.a.DELETE,disabled:0===ne(this.state.tagTreeContents).length,onClick:function(){return console.log(ne(e.state.tagTreeContents))}},"Forget replay(s)")),r.a.createElement(y.b,{className:"FindReplays-result-options-card"},r.a.createElement(y.f,null,"Export actions"),r.a.createElement(y.e,{label:"Export replay(s) to"},r.a.createElement(y.g,{fill:!0,options:[{label:"Temporary directory",value:"tempDir"},{label:"Choose directory...",value:"chooseDir",disabled:!0},{label:"Scelight",value:"scelight",disabled:!0},{label:"Sc2ReplayStats",value:"sc2replaystats",disabled:!0}]})),r.a.createElement(y.a,{fill:!0,icon:b.a.EXPORT,intent:g.a.PRIMARY,disabled:0===ne(this.state.tagTreeContents).length},"Export")))))}}]),t}(r.a.Component),de=function(e){Object(d.a)(t,e);var a=Object(f.a)(t);function t(e){var n;return Object(p.a)(this,t),(n=a.call(this,e)).state={replayId:"",setReplayId:function(e){return n.setState({replayId:e})},replayFileName:"",setReplayFileName:function(e){return n.setState({replayFileName:e})},replayTimestamp:null,replayData:"",setReplayData:function(e){return n.setState({replayData:e})},teams:[],playerTeam:null,setPlayerTeam:function(e){return n.setState({playerTeam:e})},opponentTeam:null,setOpponentTeam:function(e){return n.setState({opponentTeam:e})},replaySelectedTags:[],setReplaySelectedTags:function(e){return n.setState({replaySelectedTags:e})},notes:"",setNotes:function(e){return n.setState({notes:e})},formDisabled:!0,disableForm:function(){return n.setState({formDisabled:!0})},resetAndDisableForm:function(){return n.setState({failedToLoadReplay:!1,replayId:"",replayTimestamp:null,teams:[],playerTeam:null,opponentTeam:null,replaySelectedTags:[],notes:"",formDisabled:!0})},failedToLoadReplay:!1,failedToTagReplay:!1,submittingReplay:!1,navbarTabId:"form",setNavbarTabId:function(e){n.setState({navbarTabId:e})},suggestTags:[],updateReplayInfo:function(){n.setState({formDisabled:!0,submittingReplay:!0}),U.updateReplayInfo({replayId:n.state.replayId,replayData:n.state.replayData,selectedTags:n.state.replaySelectedTags,playerTeam:n.state.playerTeam,opponentTeam:n.state.opponentTeam,notes:n.state.notes})}},n}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;U.onReplayLoadedListeners.push(this),U.onReplayUpdatedListeners.push(this),Object(i.a)(c.a.mark((function a(){var t,n;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,U.findReplays({});case 2:t=a.sent,n=t.tagFrequencyTable,e.setState({suggestTags:j(n.map((function(e){return e.tag})))});case 5:case"end":return a.stop()}}),a)})))()}},{key:"componentWillUnmount",value:function(){U.onReplayLoadedListeners.splice(U.onReplayLoadedListeners.indexOf(this),1),U.onReplayUpdatedListeners.splice(U.onReplayUpdatedListeners.indexOf(this),1)}},{key:"onReplayLoaded",value:function(e){var a=e.replayId,t=e.replayFileName,n=e.replayData,r=e.replayTimestamp,l=e.teams,s=e.playerTeam,o=e.opponentTeam,c=e.selectedTags,i=e.notes;e.force||this.state.replayId===a?this.setState({replayId:a,replayData:n||this.state.replayData,formDisabled:!1,submittingReplay:!1,failedToLoadReplay:!1,replayTimestamp:r,teams:l,playerTeam:s,opponentTeam:o,replayFileName:t||this.state.replayFileName,replaySelectedTags:c,notes:i}):this.setState({formDisabled:!0,submittingReplay:!1,failedToLoadReplay:!0,replayId:"",teams:[],playerTeam:null,opponentTeam:null,replayTimestamp:null,replaySelectedTags:[],notes:""})}},{key:"onReplayUpdated",value:function(e){var a=e.success,t=e.replayId;this.setState({submittingReplay:!1}),this.state.replayId===t&&this.setState({failedToTagReplay:!a,formDisabled:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(y.b,{interactive:!0,elevation:W.a.TWO,className:"App-card"},r.a.createElement(J,null),r.a.createElement("div",{className:"App-break"},r.a.createElement("br",null)),r.a.createElement(y.q,{animate:!0,id:"navbar",large:!0,selectedTabId:this.state.navbarTabId,onChange:function(a){return e.setState({navbarTabId:a})}},r.a.createElement(y.p,{id:"form",title:"Replay Details",panel:r.a.createElement(H,this.state)}),r.a.createElement(y.p,{id:"search",title:"Find Replays",panel:r.a.createElement(ue,this.state)}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[283,1,2]]]);
//# sourceMappingURL=main.491c4705.chunk.js.map