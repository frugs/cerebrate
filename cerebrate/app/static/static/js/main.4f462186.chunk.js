(this["webpackJsonpcerebrate-gui"]=this["webpackJsonpcerebrate-gui"]||[]).push([[0],{281:function(e,t,a){e.exports=a(427)},286:function(e,t,a){},288:function(e,t,a){},319:function(e,t){},321:function(e,t){},332:function(e,t){},334:function(e,t){},361:function(e,t){},363:function(e,t){},364:function(e,t){},370:function(e,t){},372:function(e,t){},390:function(e,t){},392:function(e,t){},404:function(e,t){},407:function(e,t){},412:function(e,t,a){},413:function(e,t,a){},414:function(e,t,a){},415:function(e,t,a){},416:function(e,t,a){},417:function(e,t,a){},426:function(e,t,a){},427:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),s=a.n(l),o=(a(286),a(12)),c=a.n(o),i=a(20),p=a(29),u=a(30),d=a(32),f=a(31),m=(a(288),a(36)),y=a(432),g=a(43),b=a(27),T=a(434),h=a(64),v=["player","opponent","game"],E=[g.a.SUCCESS,g.a.DANGER,g.a.PRIMARY],R=function(e){var t,a=Object(h.a)(v);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(0===e.indexOf(n))return n}}catch(r){a.e(r)}finally{a.f()}return null},S=function(e){var t,a=Object(h.a)(v);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(0===e.indexOf(n))return e.slice(n.length+":".length)}}catch(r){a.e(r)}finally{a.f()}},O=function(e){for(var t=0;t<v.length&&E.length;t++)if(0===e.indexOf(v[t]))return E[t];return null};var N=function(e){var t=e.fill,a=e.disabled,n=e.tagIntent,l=e.suggestTags,s=e.selectedTags,o=e.onTagsSelected,c=e.tagPrefix,i=Object(m.a)(e,["fill","disabled","tagIntent","suggestTags","selectedTags","onTagsSelected","tagPrefix"]);return r.a.createElement(T.a,Object.assign({createNewItemRenderer:function(e,t,a){return r.a.createElement(y.l,{active:t,onClick:a,text:e,key:e})},itemRenderer:function(e,t){var a=t.modifiers,n=t.handleClick;return a.matchesPredicate?r.a.createElement(y.l,{active:a.active,onClick:n,text:S(e),key:e}):null},itemPredicate:function(e,t,a,n){return 0===t.indexOf(c)&&!s.includes(t)&&t.includes(e.toLocaleLowerCase("en-GB"))},initialContent:null,items:l,selectedItems:s.filter((function(e){return 0===e.indexOf(c)})),createNewItemFromQuery:function(e){return c+e},onItemSelect:function(e){s.includes(e)||(s.push(e),o(s))},resetOnSelect:!0,tagRenderer:function(e){return S(e)},tagInputProps:{disabled:a,onRemove:function(e,t,a){s.splice(s.indexOf(c+e),1),o(s)},tagProps:{intent:n}},openOnKeyDown:!0,fill:t,placeholder:"Tags..."},i))},x=a(120),D=a.n(x),I=(a(410),{sleep:function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),A=a(93),w=["macro","all_in","1_base_all_in","2_base_all_in","3_base_all_in","mech","bio","stargate","twilight","dt","swarm_host","battlecruiser","nydus","cannon_rush","proxy_barracks","proxy_hatch"],C=[].concat(Object(A.a)(w.map((function(e){return"player:".concat(e)}))),Object(A.a)(w.map((function(e){return"opponent:".concat(e)}))),Object(A.a)(["macro","basetrade"].map((function(e){return"game:".concat(e)})))),j=function(e){var t=new Set(e);return e.concat(C.filter((function(e){return!t.has(e)})))},k=j(["player:win","player:loss","player:terran","player:protoss","player:zerg","player:ai","opponent:win","opponent:loss","opponent:terran","opponent:protoss","opponent:zerg","opponent:ai","game:zvp","game:zvt","game:zvz","game:tvz","game:tvp","game:tvt","game:pvt","game:pvz","game:pvp","game:short","game:long","game:1v1","game:2v2","game:3v3","game:4v4","game:ffa"]),L=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return console.log(t)},F=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n,r,l,s,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,a=new Array(t),n=0;n<t;n++)a[n]=o[n];if(L(a),!(a.length<1)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,I.sleep(200);case 6:r=a[0],l=r.replayId,s=r.force,M.onReplayLoadedListeners.forEach((function(e){return e.onReplayLoaded({replayId:l,replayTimestamp:1575909015,teams:["BobTheZealot","Jim Raynor"],playerTeam:null,opponentTeam:null,replayFileName:null,selectedTags:["game:fake_tag"],notes:"Some fake notes",force:s})}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=r.length,a=new Array(t),n=0;n<t;n++)a[n]=r[n];return L(a),e.next=4,I.sleep(200);case 4:M.onReplayLoadedListeners.forEach((function(e){return e.onReplayLoaded({replayId:"SOME HASH VALUE",replayTimestamp:Math.floor(Date.now()/1e3),teams:["Tassadar","Artanis"],playerTeam:null,opponentTeam:null,replayFileName:null,selectedTags:["game:fake_tag_2"],notes:"This is the most recently played replay",force:!0})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n,r,l,s,o,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,a=new Array(t),n=0;n<t;n++)a[n]=i[n];if(L(a),!(a.length<1)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,I.sleep(200);case 6:r=a[0],l=r.replayId,s=r.playerTeam,o=r.opponentTeam,M.onReplayLoadedListeners.forEach((function(e){return e.onReplayLoaded({replayId:l,replayTimestamp:1575909015,teams:["BobTheZealot","JimRaynor"],playerTeam:s,opponentTeam:o,replayFileName:null,selectedTags:["game:fake_tag"],notes:"Some fake notes",force:!1})}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n,r,l=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=l.length,a=new Array(t),n=0;n<t;n++)a[n]=l[n];if(L(a),!(a.length<1)){e.next=4;break}return e.abrupt("return");case 4:return r=a[0].replayId,e.next=7,I.sleep(500);case 7:M.onReplayUpdatedListeners.forEach((function(e){return e.onReplayUpdated({success:!0,replayId:r})}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n,r,l,s,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,a=new Array(t),n=0;n<t;n++)a[n]=o[n];if(L(a),!(a.length<1)){e.next=4;break}return e.abrupt("return");case 4:return r=a[0],l=r.includeTags||[],s=r.excludeTags||[],e.abrupt("return",{replays:[{replayId:"f91abca15806c6038f9b4af454af40d6dd32",replayTimestamp:1602931843,teams:["BobTheZealot","JimRaynor"],notes:"A truly great game between the two titans of StarCraft"},{replayId:"540a1430ffe4d73f7c2c9d87cd2e4907b419",replayTimestamp:1585730727,teams:["Tassadar","JimRaynor"],notes:"An unfortunate disagreement between friends led to this bar fight"},{replayId:"ab6ee43405077302a6a9fc3f1ceaf6aae6fc",replayTimestamp:1322166082,teams:["BobTheZealot","Tassadar"],notes:"An awful match"},{replayId:"48df54843f16afea0b8b92aa167de0e31912",replayTimestamp:1471426714,teams:["Tassadar","BobTheZealot"],notes:"Very BM"},{replayId:"391b6c73cae67daaa1306c5ef5cad275bd29",replayTimestamp:1398404675,teams:["Tassadar","Artanis"],notes:"The quick brown fox jumps over the lazy dog. Abcdefghijklm nopqrs t uvwxy z"},{replayId:"03afb9220f1eee91ed3cdcf862446bfb1002",replayTimestamp:1435622178,teams:["Artanis","BobTheZealot"],notes:""}],tagFrequencyTable:k.filter((function(e){return!l.includes(e)&&!s.includes(e)})).map((function(e){return{tag:e,frequency:1}}))});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=r.length,a=new Array(t),n=0;n<t;n++)a[n]=r[n];L(a);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M={selectReplay:function(){return(self&&self.selectReplay||F).apply(void 0,arguments)},selectMostRecentReplay:function(){return(self&&self.selectMostRecentReplay||P).apply(void 0,arguments)},selectPlayerOpponent:function(){return(self&&self.selectPlayerOpponent||_).apply(void 0,arguments)},updateReplayInfo:function(){return(self&&self.updateReplayInfo||G).apply(void 0,arguments)},findReplays:function(){return(self&&self.findReplays||B).apply(void 0,arguments)},forgetReplays:function(){return(self&&self.forgetReplays||U).apply(void 0,arguments)},onReplayLoadedListeners:[],onReplayUpdatedListeners:[]};window.replayLoaded=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M.onReplayLoadedListeners.forEach((function(e){return e.onReplayLoaded(t)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.replayUpdated=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.sleep(500);case 2:M.onReplayUpdatedListeners.forEach((function(e){return e.onReplayUpdated(t)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();a(412);var Y=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={valid:!0,disabled:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.replayFileName,n=t.setReplayId,l=t.setReplayFileName,s=t.setReplayData,o=t.resetAndDisableForm,c=Object(m.a)(t,["replayFileName","setReplayId","setReplayFileName","setReplayData","resetAndDisableForm"]);return r.a.createElement("div",{className:"ReplaySelector-container"},r.a.createElement(y.e,Object.assign({disabled:this.state.disabled,text:a||"Choose replay file...",onInputChange:function(t){var a=t.target.value;if(a&&t.target.files){var r=t.target.files[0];e.setState({disabled:!0}),l(function(e){return e.split("\\").pop().split("/").pop()}(a)),o();var c=new FileReader;c.addEventListener("load",(function(t){var a=t.target.result,l=D.a.SHA256(D.a.lib.WordArray.create(a)).toString();n(l);var o=new FileReader;o.addEventListener("load",(function(t){var a=t.target.result;s(a),e.setState({disabled:!1}),M.selectReplay({replayId:l,replayData:a})})),o.readAsDataURL(r)})),c.readAsArrayBuffer(r)}},inputProps:{accept:".sc2replay"}},c)),r.a.createElement(y.b,{className:"ReplaySelector-button",text:"Most recent replay",onClick:function(e){o(),M.selectMostRecentReplay()}}))}}]),a}(r.a.Component),q=(a(413),function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"onPlayerSelected",value:function(e){var t=this.props,a=t.replayId,n=t.teams,r=t.setPlayerTeam,l=t.setOpponentTeam,s=t.disableForm,o=parseInt(e.currentTarget.value);if(o<0)r(null);else{r(o);var c=o,i=null;if(2===n.length){var p=0===o?1:0;l(p),i=p}s(),M.selectPlayerOpponent({replayId:a,playerTeam:c,opponentTeam:i})}}},{key:"onOpponentSelected",value:function(e){var t=this.props,a=t.replayId,n=t.teams,r=t.setPlayerTeam,l=t.setOpponentTeam,s=t.disableForm,o=parseInt(e.currentTarget.value);if(o<0)l(null);else{l(o);var c=o,i=null;if(2===n.length){var p=0===o?1:0;r(p),i=p}s(),M.selectPlayerOpponent({replayId:a,playerTeam:i,opponentTeam:c})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.formDisabled,n=t.teams,l=t.playerTeam,s=t.opponentTeam;return r.a.createElement("div",{className:"SelectPlayerAndOpponentInput-container"},r.a.createElement(y.f,{className:"SelectPlayerAndOpponentInput-form-group SelectPlayerAndOpponentInput-form-group-player",label:"Player"},r.a.createElement(y.h,{disabled:a,fill:!0,iconProps:{intent:g.a.SUCCESS},options:[{label:"Choose player...",value:"-1"}].concat(n.map((function(e,t){return{label:e,value:t.toString()}}))),value:null!==l?l.toString():"-1",onChange:function(t){return e.onPlayerSelected(t)}})),r.a.createElement(y.f,{className:"SelectPlayerAndOpponentInput-form-group",label:"Opponent"},r.a.createElement(y.h,{disabled:a,fill:!0,iconProps:{intent:g.a.DANGER},options:[{label:"Choose opponent...",value:"-1"}].concat(n.map((function(e,t){return{label:e,value:t.toString()}}))),value:null!==s?s.toString():"-1",onChange:function(t){return e.onOpponentSelected(t)}})))}}]),a}(r.a.Component)),z=function(e){var t=new Date(1e3*e);return t.toLocaleDateString()+" "+t.toLocaleTimeString()},V=function(e){return Math.floor(e.getTime()/1e3)},W=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.replayTimestamp;return r.a.createElement(y.f,{label:"Replay date"},r.a.createElement(y.j,{disabled:!0,fill:!0,value:e?z(e):""}))}}]),a}(r.a.Component);function H(e){var t=e.notes,a=e.replaySelectedTags,n=e.submittingReplay,l=e.setNotes,s=e.updateReplayInfo,o=e.setReplaySelectedTags,c=Object(m.a)(e,["notes","replaySelectedTags","submittingReplay","setNotes","updateReplayInfo","setReplaySelectedTags"]),i=c.replayId,p=c.formDisabled,u=c.playerTeam,d=c.opponentTeam,f=c.failedToTagReplay,T=c.failedToLoadReplay;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(y.f,{label:"Replay ID"},r.a.createElement(y.j,{disabled:!0,fill:!0,value:i})),r.a.createElement(y.f,{label:"Replay file",intent:T?g.a.DANGER:null,helperText:T?"Failed to load replay, please select another or try again.":null},r.a.createElement(Y,Object.assign({fill:!0},c))),r.a.createElement(W,c),r.a.createElement(q,c),r.a.createElement(y.f,{label:"Player tags"},r.a.createElement(N,Object.assign({},c,{fill:!0,selectedTags:a,onTagsSelected:o,disabled:p||null===u,tagPrefix:"player:",tagIntent:g.a.SUCCESS}))),r.a.createElement(y.f,{label:"Opponent tags"},r.a.createElement(N,Object.assign({},c,{fill:!0,selectedTags:a,onTagsSelected:o,disabled:p||null===d,tagPrefix:"opponent:",tagIntent:g.a.DANGER}))),r.a.createElement(y.f,{label:"Game tags"},r.a.createElement(N,Object.assign({},c,{fill:!0,selectedTags:a,onTagsSelected:o,disabled:p,tagPrefix:"game:",tagIntent:g.a.PRIMARY}))),r.a.createElement(y.f,{label:"Notes"},r.a.createElement(y.t,{fill:!0,disabled:p,value:t,onChange:function(e){return l(e.target.value)}})),r.a.createElement(y.f,{intent:f?g.a.DANGER:null,helperText:f?"Failed to save tags, please select another replay or try again.":null},r.a.createElement(y.b,{fill:!0,loading:n,intent:g.a.SUCCESS,disabled:p||null===u||null===d,onClick:s,icon:b.a.TAG},"Save tags")))}a(414);var J=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={navbarTabId:"Home"},n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(y.m,{className:"CerebrateNavbar-navbar"},r.a.createElement(y.m.Group,null,r.a.createElement(y.m.Heading,{className:"CerebrateNavbar-navbar-heading"},r.a.createElement("div",null,r.a.createElement("div",{className:"CerebrateNavbar-logo"},"Cerebrate"),r.a.createElement("em",{className:"CerebrateNavbar-logo-subtitle"},"A StarCraft II Replay Manager")))))}}]),a}(r.a.Component),Z=a(44),K=a(91),Q=a(195),X=a(1),$=(a(415),{ROOT:"root",REPLAY_FOLDER:"replay_folder",REPLAY:"replay",TAG:"tag",LOADING:"loading"}),ee=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).deselectNodes=function(t){if(t){var a,n=Object(h.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value;r.isSelected=!1,e.deselectNodes(r.childNodes)}}catch(l){n.e(l)}finally{n.f()}}},e.deselectAllNodes=function(){e.deselectNodes(e.props.contents)},e.handleNodeClick=function(){var t=Object(i.a)(c.a.mark((function t(a,n,r){var l,s,o,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a.nodeType,t.next=t.t0===$.TAG?3:t.t0===$.REPLAY_FOLDER||t.t0===$.REPLAY?6:16;break;case 3:return t.next=5,e.handleNodeExpand(a);case 5:return t.abrupt("break",17);case 6:if(a.nodeType!==$.REPLAY_FOLDER||a.isExpanded){t.next=10;break}return t.next=9,e.handleNodeExpand(a);case 9:return t.abrupt("break",17);case 10:if(r.shiftKey?a.isSelected=!a.isSelected:(l=a.isSelected,e.deselectAllNodes(),a.isSelected=a.nodeType===$.REPLAY||!l),a.childNodes){s=Object(h.a)(a.childNodes);try{for(s.s();!(o=s.n()).done;)(i=o.value).isSelected=!i.disabled&&a.isSelected}catch(n){s.e(n)}finally{s.f()}}if(!a.isSelected||a.isExpanded){t.next=15;break}return t.next=15,e.handleNodeExpand(a);case 15:case 16:return t.abrupt("break",17);case 17:e.props.updateTagTree();case 18:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e.handleNodeCollapse=function(t){switch(t.nodeType){case $.ROOT:return;case $.TAG:case $.REPLAY_FOLDER:t.isSelected=!1,e.deselectNodes(t.childNodes)}t.isExpanded=!1,e.props.updateTagTree()},e.handleNodeExpand=function(){var t=Object(i.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.isExpanded=!0,t.t0=a.nodeType,t.next=t.t0===$.TAG?4:7;break;case 4:return t.next=6,e.handleTagNodeExpand(a);case 6:case 7:return t.abrupt("break",8);case 8:e.props.updateTagTree();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleTagNodeExpand=function(){var t=Object(i.a)(c.a.mark((function t(a){var n,r,l,s,o,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.includeTags,l=n.excludeTags,t.next=3,M.findReplays({includeTags:r.concat(a.filterTags),excludeTags:l});case 3:s=t.sent,o=s.replays,i=s.tagFrequencyTable,a.childNodes=ae(a.filterTags,o,i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(y.u,Object.assign({},this.props,{onNodeClick:this.handleNodeClick,onNodeExpand:this.handleNodeExpand,onNodeCollapse:this.handleNodeCollapse}))}}]),a}(r.a.Component),te=function(e){return e.map((function(e,t){return{id:t+1,nodeType:$.REPLAY,replay:e,icon:r.a.createElement(y.i,{icon:b.a.DOCUMENT,className:X.a.TREE_NODE_ICON}),className:"ReplayTagTree-tree-node",label:r.a.createElement("div",{className:"ReplayTagTree-tree-node-label-replay"},r.a.createElement("div",{className:"ReplayTagTree-tree-node-label-replay-id"},e.replayId.substring(0,8)),"\xa0",r.a.createElement("div",{className:"ReplayTagTree-tree-node-label-replay-teams"},e.teams.join(" vs ")),e.notes?r.a.createElement("div",{className:"ReplayTagTree-tree-node-label-replay-notes"},r.a.createElement("em",null,e.notes)):null),secondaryLabel:r.a.createElement("div",{className:"ReplayTagTree-tree-node-secondary-label"},r.a.createElement("em",null,z(e.replayTimestamp)))}}))},ae=function(e,t,a){return[{id:0,nodeType:$.REPLAY_FOLDER,filterTags:e,icon:r.a.createElement(y.i,{icon:b.a.FOLDER_OPEN,className:X.a.TREE_NODE_ICON}),label:"Replays",childNodes:te(t)}].concat(a.map((function(t,a){return{id:a+1,nodeType:$.TAG,filterTags:e.concat(t.tag),icon:r.a.createElement(y.i,{icon:b.a.TAG,intent:O(t.tag),className:X.a.TREE_NODE_ICON}),label:r.a.createElement("div",null,r.a.createElement("span",{className:"ReplayTagTree-tree-node-label-"+R(t.tag)+"-tag"},r.a.createElement("span",{className:"ReplayTagTree-tree-node-label-tag-prefix"},R(t.tag),":\xa0"),r.a.createElement("span",{className:"ReplayTagTree-tree-node-label-tag-name"},r.a.createElement("strong",null,S(t.tag))))),secondaryLabel:r.a.createElement("span",{className:"ReplayTagTree-tree-node-secondary-label"},r.a.createElement("em",null,"Replay(s): "+t.frequency," ")),childNodes:[{id:0,nodeType:$.LOADING,label:r.a.createElement("span",null,r.a.createElement("em",null,"Loading...")),disabled:!0}]}})))},ne=function(e,t){return[{id:0,nodeType:$.ROOT,filterTags:[],icon:r.a.createElement(y.i,{icon:b.a.LIST_COLUMNS,className:X.a.TREE_NODE_ICON}),label:r.a.createElement("div",{className:"ReplayTagTree-tree-node-label-root"},r.a.createElement("strong",null,"Replay results")),isExpanded:!0,childNodes:ae([],e,t)}]},re=function e(t){return t?t.filter((function(e){return e.isSelected&&e.nodeType===$.REPLAY})).map((function(e){return e.replay})).concat(t.map((function(t){return e(t.childNodes)})).flat()):[]},le=function(e){if(e){var t=new Set(re(e).map((function(e){return e.replayId})));!function e(a){a&&(a.filter((function(e){return e.nodeType===$.REPLAY&&t.has(e.replay.replayId)})).forEach((function(e){e.disabled=!0,e.isSelected=!1})),a.forEach((function(t){return e(t.childNodes)})))}(e)}};a(416);function se(e){var t=e.formGroupLabel,a=e.selectOptions,n=e.selectValue,l=e.sortDescending,s=e.setSortDescending;return r.a.createElement(y.f,{className:"ReplayFilterAndSort-sorting-form-group",contentClassName:"ReplayFilterAndSort-sorting-form-group-content",label:t},r.a.createElement(y.h,{fill:!0,options:a,defaultValue:n}),r.a.createElement(y.p,{className:"ReplayFilterAndSort-sorting-descending-switch",checked:l,innerLabel:"Ascending",innerLabelChecked:"Descending",onChange:function(e){return s(e.currentTarget.checked)}}))}function oe(e){var t=e.sortReplaysDescending,a=e.sortTagsDescending;return r.a.createElement(y.c,{className:"ReplayFilterAndSort-container"},r.a.createElement(y.g,{className:"ReplayFilterAndSort-control-group-heading"},"Sorting"),r.a.createElement(y.d,{fill:!0,vertical:!1},r.a.createElement(se,{formGroupLabel:"Sort replays by",selectOptions:[{label:"Replay date",value:"date"}],selectValue:"date",sortDescending:t,setSortDescending:function(){}}),r.a.createElement(se,{formGroupLabel:"Sort tags by",selectOptions:[{label:"Tag frequency",value:"frequency"}],selectValue:"frequency",sortDescending:a,setSortDescending:function(){}})))}function ce(e){var t=e.className,a=e.selectedTags,n=e.onTagsSelected,l=e.title,s=Object(m.a)(e,["className","selectedTags","onTagsSelected","title"]);return r.a.createElement(y.c,{className:"ReplayFilterAndSort-container ".concat(t)},r.a.createElement(y.g,{className:"ReplayFilterAndSort-control-group-heading"},l),r.a.createElement(y.d,{fill:!0,vertical:!1},r.a.createElement(y.f,{label:"Player tags",className:"ReplayFilterAndSort-select-tags-form-group"},r.a.createElement(N,Object.assign({selectedTags:a,onTagsSelected:n,tagPrefix:"player:",tagIntent:g.a.SUCCESS,fill:!0},s))),r.a.createElement(y.f,{label:"Opponent tags",className:"ReplayFilterAndSort-select-tags-form-group"},r.a.createElement(N,Object.assign({selectedTags:a,onTagsSelected:n,tagPrefix:"opponent:",tagIntent:g.a.DANGER,fill:!0},s))),r.a.createElement(y.f,{label:"Game tags",className:"ReplayFilterAndSort-select-tags-form-group"},r.a.createElement(N,Object.assign({selectedTags:a,onTagsSelected:n,tagPrefix:"game:",tagIntent:g.a.PRIMARY,fill:!0},s)))))}a(417);var ie=a(435),pe=a(121);function ue(e){var t=e.filterReplaysByDate,a=e.setFilterReplaysByDate,l=e.filterDateRange,s=e.setFilterDateRange,o=Object(m.a)(e,["filterReplaysByDate","setFilterReplaysByDate","filterDateRange","setFilterDateRange"]),c=Object(n.useState)(0),i=Object(K.a)(c,2),p=i[0],u=i[1];return r.a.createElement("div",null,r.a.createElement(y.c,{className:"ReplayFilterAndSort-container"},r.a.createElement(y.g,{className:"ReplayFilterAndSort-control-group-heading"},"Replay date"),r.a.createElement(y.f,{label:"Filter by replay date",className:"ReplayDateFilter-replay-date-form-group"},r.a.createElement(y.p,{checked:t,innerLabel:"Show all replays",innerLabelChecked:"Filter replays by date",onChange:function(e){return a(e.currentTarget.checked)}})),t?r.a.createElement(y.f,{label:"Choose dates",className:"ReplayDateFilter-replay-date-form-group"},r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement(ie.a,Object.assign({className:"ReplayDateFilter-replay-date-range-picker",maxDate:new Date,singleMonthOnly:!0,timePickerProps:{autoFocus:!0,precision:pe.b.MINUTE,defaultValue:new Date},allowSingleDayRange:!0,selectedShortcutIndex:p,onShortcutChange:function(e,t){return u(t)},value:l,onChange:function(e){return s(e)}},o)))):null))}function de(e){var t=e.includeTags,a=e.setIncludeTags,n=e.excludeTags,l=e.setExcludeTags,s=Object(m.a)(e,["includeTags","setIncludeTags","excludeTags","setExcludeTags"]);return r.a.createElement("div",null,r.a.createElement(ue,s),r.a.createElement(oe,s),r.a.createElement(ce,Object.assign({className:"ReplayFilterAndSort-container-include-tags",title:"Include tags",selectedTags:t,onTagsSelected:a},s)),r.a.createElement(ce,Object.assign({className:"ReplayFilterAndSort-container-exclude-tags",title:"Exclude tags",selectedTags:n,onTagsSelected:l},s)))}a(426);var fe=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={loading:!1,resultsCounter:0,filterReplaysByDate:!1,setFilterReplaysByDate:function(e){n.setState({filterReplaysByDate:e})},filterDateRange:[new Date((new Date).setHours(0,0,0,0)),new Date],setFilterDateRange:function(e){n.setState({filterDateRange:e})},sortReplaysDescending:!0,setSortReplaysDescending:function(e){n.setState({sortReplaysDescending:e})},sortTagsDescending:!0,setSortTagsDescending:function(e){n.setState({sortReplaysDescending:e})},includeTags:["game:1v1"],setIncludeTags:function(e){n.setState({includeTags:e})},excludeTags:["opponent:ai"],setExcludeTags:function(e){n.setState({excludeTags:e})},tagTreeContents:[],setTagTreeContents:function(e){n.setState({tagTreeContents:e})},updateTagTree:function(){n.setState(n.state)},viewDetailsButtonLoading:!1,isConfirmForgetAlertOpen:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.setNavbarTabId;return r.a.createElement("div",null,r.a.createElement("div",{className:"FindReplays-filter-sort-container"},r.a.createElement(de,Object.assign({},this.props,this.state)),r.a.createElement(y.b,{fill:!0,intent:g.a.PRIMARY,loading:this.state.loading,onClick:function(){e.setState({loading:!0}),Object(i.a)(c.a.mark((function t(){var a,n,r,l,s,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(Q.a)({includeTags:e.state.includeTags,excludeTags:e.state.excludeTags},e.state.filterReplaysByDate&&(2===(c=e.state.filterDateRange).length&&null!==c[0]&&null!==c[1])&&{startTimestamp:V(e.state.filterDateRange[0]),endTimestamp:V(e.state.filterDateRange[1])}),t.next=3,Promise.all([M.findReplays(a),I.sleep(200)]);case 3:n=t.sent,r=Object(K.a)(n,1),l=r[0],s=l.replays,o=l.tagFrequencyTable,e.setState({loading:!1,resultsCounter:e.state.resultsCounter+1,tagTreeContents:ne(s,o)});case 9:case"end":return t.stop()}var c}),t)})))()},icon:b.a.SEARCH},"Find replays")),0===this.state.resultsCounter?null:r.a.createElement("div",{className:"FindReplays-results-container ".concat(this.state.loading?X.a.SKELETON:"")},r.a.createElement(ee,Object.assign({className:"FindReplays-tag-tree",key:this.state.resultsCounter,contents:this.state.tagTreeContents},this.props,this.state)),r.a.createElement("div",{className:"FindReplays-result-options-container"},r.a.createElement(y.c,{className:"FindReplays-result-options-card"},r.a.createElement(y.g,null,"Replay actions"),r.a.createElement(y.b,{fill:!0,icon:b.a.DOCUMENT,disabled:1!==re(this.state.tagTreeContents).length,loading:this.state.viewDetailsButtonLoading,onClick:function(){var a=Object(i.a)(c.a.mark((function a(n){var r;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(1===(r=re(e.state.tagTreeContents)).length){a.next=3;break}return a.abrupt("return");case 3:return e.setState({viewDetailsButtonLoading:!0}),a.next=6,M.selectReplay({replayId:r[0].replayId,force:!0});case 6:e.setState({viewDetailsButtonLoading:!1}),t("form");case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},"View details"),r.a.createElement(y.b,{fill:!0,intent:g.a.WARNING,icon:b.a.DELETE,disabled:0===re(this.state.tagTreeContents).length,onClick:function(){e.setState({isConfirmForgetAlertOpen:!0})}},"Forget replay(s)"),r.a.createElement(y.a,{isOpen:this.state.isConfirmForgetAlertOpen,cancelButtonText:"Cancel",confirmButtonText:"Forget replay(s)",onCancel:function(){return e.setState({isConfirmForgetAlertOpen:!1})},onConfirm:Object(i.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=re(e.state.tagTreeContents).map((function(e){return e.replayId})),t.next=3,M.forgetReplays({replayIds:a});case 3:le(e.state.tagTreeContents),e.state.updateTagTree(),e.setState({isConfirmForgetAlertOpen:!1});case 6:case"end":return t.stop()}}),t)}))),intent:g.a.WARNING,icon:b.a.WARNING_SIGN},"Are you sure you want to forget these replays? This will cause any tags you might have added to be permanently lost.")),r.a.createElement(y.c,{className:"FindReplays-result-options-card"},r.a.createElement(y.g,null,"Export actions"),r.a.createElement(y.f,{label:"Export replay(s) to"},r.a.createElement(y.h,{fill:!0,options:[{label:"Temporary directory",value:"tempDir"},{label:"Choose directory...",value:"chooseDir",disabled:!0},{label:"Scelight",value:"scelight",disabled:!0},{label:"Sc2ReplayStats",value:"sc2replaystats",disabled:!0}]})),r.a.createElement(y.b,{fill:!0,icon:b.a.EXPORT,intent:g.a.PRIMARY,disabled:0===re(this.state.tagTreeContents).length},"Export")))))}}]),a}(r.a.Component),me=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={replayId:"",setReplayId:function(e){return n.setState({replayId:e})},replayFileName:"",setReplayFileName:function(e){return n.setState({replayFileName:e})},replayTimestamp:null,replayData:"",setReplayData:function(e){return n.setState({replayData:e})},teams:[],playerTeam:null,setPlayerTeam:function(e){return n.setState({playerTeam:e})},opponentTeam:null,setOpponentTeam:function(e){return n.setState({opponentTeam:e})},replaySelectedTags:[],setReplaySelectedTags:function(e){return n.setState({replaySelectedTags:e})},notes:"",setNotes:function(e){return n.setState({notes:e})},formDisabled:!0,disableForm:function(){return n.setState({formDisabled:!0})},resetAndDisableForm:function(){return n.setState({failedToLoadReplay:!1,replayId:"",replayTimestamp:null,teams:[],playerTeam:null,opponentTeam:null,replaySelectedTags:[],notes:"",formDisabled:!0})},failedToLoadReplay:!1,failedToTagReplay:!1,submittingReplay:!1,navbarTabId:"form",setNavbarTabId:function(e){n.setState({navbarTabId:e})},suggestTags:[],updateReplayInfo:function(){n.setState({formDisabled:!0,submittingReplay:!0}),M.updateReplayInfo({replayId:n.state.replayId,replayData:n.state.replayData,selectedTags:n.state.replaySelectedTags,playerTeam:n.state.playerTeam,opponentTeam:n.state.opponentTeam,notes:n.state.notes})}},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;M.onReplayLoadedListeners.push(this),M.onReplayUpdatedListeners.push(this),Object(i.a)(c.a.mark((function t(){var a,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.findReplays({});case 2:a=t.sent,n=a.tagFrequencyTable,e.setState({suggestTags:j(n.map((function(e){return e.tag})))});case 5:case"end":return t.stop()}}),t)})))()}},{key:"componentWillUnmount",value:function(){M.onReplayLoadedListeners.splice(M.onReplayLoadedListeners.indexOf(this),1),M.onReplayUpdatedListeners.splice(M.onReplayUpdatedListeners.indexOf(this),1)}},{key:"onReplayLoaded",value:function(e){var t=e.replayId,a=e.replayFileName,n=e.replayData,r=e.replayTimestamp,l=e.teams,s=e.playerTeam,o=e.opponentTeam,c=e.selectedTags,i=e.notes;e.force||this.state.replayId===t?this.setState({replayId:t,replayData:n||this.state.replayData,formDisabled:!1,submittingReplay:!1,failedToLoadReplay:!1,replayTimestamp:r,teams:l,playerTeam:s,opponentTeam:o,replayFileName:a||this.state.replayFileName,replaySelectedTags:c,notes:i}):this.setState({formDisabled:!0,submittingReplay:!1,failedToLoadReplay:!0,replayId:"",teams:[],playerTeam:null,opponentTeam:null,replayTimestamp:null,replaySelectedTags:[],notes:""})}},{key:"onReplayUpdated",value:function(e){var t=e.success,a=e.replayId;this.setState({submittingReplay:!1}),this.state.replayId===a&&this.setState({failedToTagReplay:!t,formDisabled:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(y.c,{interactive:!0,elevation:Z.a.TWO,className:"App-card"},r.a.createElement(J,null),r.a.createElement("div",{className:"App-break"},r.a.createElement("br",null)),r.a.createElement(y.r,{animate:!0,id:"navbar",large:!0,selectedTabId:this.state.navbarTabId,onChange:function(t){return e.setState({navbarTabId:t})}},r.a.createElement(y.q,{id:"form",title:"Replay Details",panel:r.a.createElement(H,this.state)}),r.a.createElement(y.q,{id:"search",title:"Find Replays",panel:r.a.createElement(fe,this.state)}))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[281,1,2]]]);
//# sourceMappingURL=main.4f462186.chunk.js.map